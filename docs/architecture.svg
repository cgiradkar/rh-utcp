<svg width="900" height="800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 800">
  <defs>
    <!-- Arrow marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="8" refY="5" orient="auto" markerUnits="strokeWidth">
      <polygon points="0 0, 10 5, 0 10" fill="#333" stroke="none"/>
    </marker>
    
    <!-- Font family definition and text outline styles -->
    <style>
      text { 
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        paint-order: stroke fill;
      }
      .dark-text-outline {
        stroke: white;
        stroke-width: 3px;
        stroke-linejoin: round;
      }
      .light-text-outline {
        stroke: black;
        stroke-width: 2px;
        stroke-linejoin: round;
      }
    </style>
  </defs>
  
  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" font-size="24" font-weight="bold" fill="#1a202c" class="dark-text-outline">RH-UTCP Architecture</text>
  
  <!-- AI Agents Section -->
  <rect x="40" y="60" width="820" height="120" fill="rgba(255,255,255,0.1)" stroke="#1890ff" stroke-width="2" rx="5"/>
  <text x="450" y="85" text-anchor="middle" font-size="16" font-weight="600" fill="#0050b3" class="dark-text-outline">AI Agents / Clients</text>
  
  <!-- AI Agent boxes -->
  <rect x="80" y="100" width="160" height="60" fill="#fff" stroke="#1890ff" stroke-width="1" rx="3"/>
  <text x="160" y="135" text-anchor="middle" font-size="14" fill="#333" class="dark-text-outline">Cursor Editor</text>
  
  <rect x="280" y="100" width="160" height="60" fill="#fff" stroke="#1890ff" stroke-width="1" rx="3"/>
  <text x="360" y="135" text-anchor="middle" font-size="14" fill="#333" class="dark-text-outline">AI Assistant</text>
  
  <rect x="480" y="100" width="160" height="60" fill="#fff" stroke="#1890ff" stroke-width="1" rx="3"/>
  <text x="560" y="135" text-anchor="middle" font-size="14" fill="#333" class="dark-text-outline">Automation Tool</text>
  
  <rect x="680" y="100" width="160" height="60" fill="#fff" stroke="#1890ff" stroke-width="1" rx="3"/>
  <text x="760" y="135" text-anchor="middle" font-size="14" fill="#333" class="dark-text-outline">Other UTCP Client</text>
  
  <!-- Discovery Server Section -->
  <rect x="40" y="220" width="820" height="180" fill="rgba(255,255,255,0.1)" stroke="#52c41a" stroke-width="2" rx="5"/>
  <text x="450" y="245" text-anchor="middle" font-size="16" font-weight="600" fill="#135200" class="dark-text-outline">RH-UTCP Discovery Server</text>
  
  <!-- Main components -->
  <rect x="80" y="270" width="200" height="100" fill="#fff" stroke="#52c41a" stroke-width="1" rx="3"/>
  <text x="180" y="295" text-anchor="middle" font-size="14" font-weight="500" fill="#333" class="dark-text-outline">HTTP Server</text>
  <text x="180" y="315" text-anchor="middle" font-size="12" fill="#666" class="dark-text-outline">/utcp endpoint</text>
  <text x="180" y="335" text-anchor="middle" font-size="12" fill="#666" class="dark-text-outline">/health endpoint</text>
  <text x="180" y="355" text-anchor="middle" font-size="12" fill="#666" class="dark-text-outline">Gin Framework</text>
  
  <rect x="320" y="270" width="200" height="100" fill="#fff" stroke="#52c41a" stroke-width="1" rx="3"/>
  <text x="420" y="295" text-anchor="middle" font-size="14" font-weight="500" fill="#333" class="dark-text-outline">Provider Registry</text>
  <text x="420" y="315" text-anchor="middle" font-size="12" fill="#666" class="dark-text-outline">Factory Pattern</text>
  <text x="420" y="335" text-anchor="middle" font-size="12" fill="#666" class="dark-text-outline">Dynamic Loading</text>
  <text x="420" y="355" text-anchor="middle" font-size="12" fill="#666" class="dark-text-outline">Tool Collection</text>
  
  <rect x="560" y="270" width="280" height="100" fill="#fff" stroke="#52c41a" stroke-width="1" rx="3"/>
  <text x="700" y="295" text-anchor="middle" font-size="14" font-weight="500" fill="#333" class="dark-text-outline">UTCP Manual Generator</text>
  <text x="700" y="315" text-anchor="middle" font-size="12" fill="#666" class="dark-text-outline">Tool Definitions</text>
  <text x="700" y="335" text-anchor="middle" font-size="12" fill="#666" class="dark-text-outline">Auth Configuration</text>
  <text x="700" y="355" text-anchor="middle" font-size="12" fill="#666" class="dark-text-outline">Schema Validation</text>
  
  <!-- Provider Section -->
  <rect x="40" y="440" width="820" height="240" fill="rgba(255,255,255,0.1)" stroke="#fa8c16" stroke-width="2" rx="5"/>
  <text x="450" y="465" text-anchor="middle" font-size="16" font-weight="600" fill="#612500" class="dark-text-outline">Tool Providers</text>
  
  <!-- Individual Providers -->
  <rect x="80" y="490" width="200" height="160" fill="#fff" stroke="#fa8c16" stroke-width="1" rx="3"/>
  <text x="180" y="515" text-anchor="middle" font-size="14" font-weight="500" fill="#333" class="dark-text-outline">Jira Provider</text>
  <rect x="95" y="530" width="170" height="25" fill="#f0f2f5" rx="2"/>
  <text x="180" y="547" text-anchor="middle" font-size="11" fill="#595959" class="dark-text-outline">jira_search_issues</text>
  <rect x="95" y="560" width="170" height="25" fill="#f0f2f5" rx="2"/>
  <text x="180" y="577" text-anchor="middle" font-size="11" fill="#595959" class="dark-text-outline">jira_create_issue</text>
  <rect x="95" y="590" width="170" height="25" fill="#f0f2f5" rx="2"/>
  <text x="180" y="607" text-anchor="middle" font-size="11" fill="#595959" class="dark-text-outline">jira_update_issue</text>
  <text x="180" y="635" text-anchor="middle" font-size="12" fill="#8c8c8c" class="dark-text-outline">Basic Auth</text>
  
  <rect x="320" y="490" width="200" height="160" fill="#fff" stroke="#fa8c16" stroke-width="1" rx="3"/>
  <text x="420" y="515" text-anchor="middle" font-size="14" font-weight="500" fill="#333" class="dark-text-outline">Wiki Provider</text>
  <rect x="335" y="530" width="170" height="25" fill="#f0f2f5" rx="2"/>
  <text x="420" y="547" text-anchor="middle" font-size="11" fill="#595959" class="dark-text-outline">wiki_search_pages</text>
  <rect x="335" y="560" width="170" height="25" fill="#f0f2f5" rx="2"/>
  <text x="420" y="577" text-anchor="middle" font-size="11" fill="#595959" class="dark-text-outline">wiki_get_page</text>
  <rect x="335" y="590" width="170" height="25" fill="#f0f2f5" rx="2"/>
  <text x="420" y="607" text-anchor="middle" font-size="11" fill="#595959" class="dark-text-outline">wiki_create_page</text>
  <text x="420" y="635" text-anchor="middle" font-size="12" fill="#8c8c8c" class="dark-text-outline">API Key Auth</text>
  
  <rect x="560" y="490" width="200" height="160" fill="#fff" stroke="#fa8c16" stroke-width="1" rx="3"/>
  <text x="660" y="515" text-anchor="middle" font-size="14" font-weight="500" fill="#333" class="dark-text-outline">GitLab Provider</text>
  <rect x="575" y="530" width="170" height="25" fill="#f0f2f5" rx="2"/>
  <text x="660" y="547" text-anchor="middle" font-size="11" fill="#595959" class="dark-text-outline">gitlab_get_project</text>
  <rect x="575" y="560" width="170" height="25" fill="#f0f2f5" rx="2"/>
  <text x="660" y="577" text-anchor="middle" font-size="11" fill="#595959" class="dark-text-outline">gitlab_search_code</text>
  <rect x="575" y="590" width="170" height="25" fill="#f0f2f5" rx="2"/>
  <text x="660" y="607" text-anchor="middle" font-size="11" fill="#595959" class="dark-text-outline">gitlab_create_mr</text>
  <text x="660" y="635" text-anchor="middle" font-size="12" fill="#8c8c8c" class="dark-text-outline">Personal Token</text>
  
  <!-- Arrows showing flow -->
  <!-- AI to Discovery -->
  <path d="M 450 180 L 450 220" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" stroke-opacity="1" fill="none"/>
  <text x="460" y="205" font-size="12" fill="#666" class="dark-text-outline">1. GET /utcp</text>
  
  <!-- Discovery internal flow -->
  <path d="M 280 320 L 320 320" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)" stroke-opacity="1" fill="none"/>
  <path d="M 520 320 L 560 320" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)" stroke-opacity="1" fill="none"/>
  
  <!-- Registry to Providers -->
  <path d="M 180 400 L 180 440" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" stroke-opacity="1" fill="none"/>
  <path d="M 420 400 L 420 440" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" stroke-opacity="1" fill="none"/>
  <path d="M 660 400 L 660 440" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" stroke-opacity="1" fill="none"/>
  <text x="430" y="425" font-size="12" fill="#666" class="dark-text-outline">2. Collect Tools</text>
  
  <!-- Direct API calls (dashed) -->
  <path d="M 160 160 L 100 490" stroke="#1890ff" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)" stroke-opacity="1" fill="none"/>
  <path d="M 360 160 L 360 490" stroke="#1890ff" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)" stroke-opacity="1" fill="none"/>
  <path d="M 560 160 L 620 490" stroke="#1890ff" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)" stroke-opacity="1" fill="none"/>
  
  <!-- Legend -->
  <rect x="40" y="710" width="300" height="55" fill="#f5f5f5" stroke="#d9d9d9" stroke-width="1" rx="3"/>
  <text x="50" y="730" font-size="12" font-weight="600" fill="#333" class="dark-text-outline">Legend:</text>
  <line x1="50" y1="745" x2="90" y2="745" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="95" y="750" font-size="11" fill="#666" class="dark-text-outline">Discovery Flow</text>
  <line x1="50" y1="760" x2="90" y2="760" stroke="#1890ff" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
  <text x="95" y="765" font-size="11" fill="#666" class="dark-text-outline">Direct API Calls (after discovery)</text>
  
  <!-- External APIs indicator -->
  <rect x="780" y="490" width="60" height="160" fill="#ffe7e7" stroke="#ff4d4f" stroke-width="1" rx="3" stroke-dasharray="3,3"/>
  <text x="810" y="515" text-anchor="middle" font-size="12" fill="#cf1322" class="light-text-outline">External</text>
  <text x="810" y="535" text-anchor="middle" font-size="12" fill="#cf1322" class="light-text-outline">Corporate</text>
  <text x="810" y="555" text-anchor="middle" font-size="12" fill="#cf1322" class="light-text-outline">APIs</text>
  <text x="810" y="580" text-anchor="middle" font-size="10" fill="#8c8c8c" class="dark-text-outline">(Jira)</text>
  <text x="810" y="600" text-anchor="middle" font-size="10" fill="#8c8c8c" class="dark-text-outline">(Wiki)</text>
  <text x="810" y="620" text-anchor="middle" font-size="10" fill="#8c8c8c" class="dark-text-outline">(GitLab)</text>
</svg> 